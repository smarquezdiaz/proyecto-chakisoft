const fs = require('fs');
const path = require('path');
const AdmZip = require('adm-zip');

const dataDir = path.join(__dirname, '..', 'data');
const rootDir = path.join(__dirname, '..');
const zipFile = path.join(dataDir, 'credenciales.zip');

(() => {
  try {
    if (fs.existsSync(zipFile)) {
      console.log('üì¶ Encontrado auth.zip, descomprimiendo...');
      const zip = new AdmZip(zipFile);
      zip.extractAllTo(rootDir, true);
      fs.unlinkSync(zipFile);
      console.log('‚úÖ auth.zip extra√≠do y eliminado');
    } else {
      console.log('‚ö†Ô∏è No se encontr√≥ auth.zip en /data');
    }
  } catch (err) {
    console.error('‚ùå Error en el script:', err);
    process.exit(1);
  }
})();